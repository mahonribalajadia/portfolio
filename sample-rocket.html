<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rocket Cursor | Debug Alignment</title>
    <style>
        :root { --bg: #020617; --accent: #6366f1; --afterburner: #00f2ff; }
        body { margin: 0; background: var(--bg); height: 100vh; cursor: none; overflow: hidden; font-family: sans-serif; }
        
        #rocket-cursor {
            position: fixed; top: 0; left: 0; width: 32px; height: 32px;
            pointer-events: none; z-index: 9999; will-change: transform;
        }

        #rocket-cursor.docked { animation: enginePulse 1.0s infinite ease-in-out; }
        @keyframes enginePulse {
            0%, 100% { filter: drop-shadow(0 0 5px var(--afterburner)); }
            50% { filter: drop-shadow(0 0 15px var(--afterburner)); }
        }

        .particle { position: fixed; pointer-events: none; border-radius: 50%; z-index: 9998; }

        /* Debug Dot Style */
        #debug-dot {
            position: fixed; width: 4px; height: 4px; background: red;
            border-radius: 50%; pointer-events: none; z-index: 10000;
            display: none; box-shadow: 0 0 5px red;
        }

        .container { display: flex; align-items: center; justify-content: center; height: 100vh; }
        a { color: white; cursor: none; text-decoration: none; padding: 15px 30px; border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; }
    </style>
</head>
<body>

    <div id="debug-dot"></div>

    <div class="container">
        <a href="#">ALIGNMENT TEST</a>
    </div>

    <div id="rocket-cursor">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
            <path d="M12 2C12 2 9 6 9 12C9 15 10 18 12 21C14 18 15 15 15 12C15 6 12 2 12 2Z" fill="white"/>
            <path d="M9 14L5 18V20L9 17V14Z" fill="var(--accent)"/>
            <path d="M15 14L19 18V20L15 17V14Z" fill="var(--accent)"/>
            <circle cx="12" cy="9" r="1.5" fill="#020617"/>
        </svg>
    </div>

    <script>
        // --- DEBUG SETTINGS ---
        const DEBUG = true; // Set to false to hide the red dot
        // ----------------------

        const rocket = document.getElementById('rocket-cursor');
        const debugDot = document.getElementById('debug-dot');
        let mouseX = 0, mouseY = 0, rocketX = 0, rocketY = 0;
        let angle = 0, isHovering = false;

        if (DEBUG) debugDot.style.display = 'block';

        document.querySelectorAll('a').forEach(link => {
            link.addEventListener('mouseenter', () => { isHovering = true; rocket.classList.add('docked'); });
            link.addEventListener('mouseleave', () => { isHovering = false; rocket.classList.remove('docked'); });
        });

        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX; mouseY = e.clientY;
        });

        // Loop for continuous particles when hovering
        setInterval(() => { if (isHovering) spawnAtTail(); }, 35);

        // Loop for movement particles
        let lastX = 0, lastY = 0;
        function movementCheck() {
            if (!isHovering && (Math.abs(mouseX - lastX) > 2 || Math.abs(mouseY - lastY) > 2)) {
                spawnAtTail();
            }
            lastX = mouseX; lastY = mouseY;
            requestAnimationFrame(movementCheck);
        }
        movementCheck();

        function spawnAtTail() {
            const radians = (angle - 90) * (Math.PI / 180);

            // ADJUST THESE VALUES TO ALIGN THE FIRE:
            // offset: distance from center (higher = further down)
            // sideShift: horizontal adjust (positive = right, negative = left)
            const offset = isHovering ? 18 : 15; 
            const sideShift = 2; 

            const exX = rocketX - Math.cos(radians) * offset + (Math.sin(radians) * sideShift);
            const exY = rocketY - Math.sin(radians) * offset - (Math.cos(radians) * sideShift);

            if (DEBUG) {
                debugDot.style.left = `${exX - 2}px`;
                debugDot.style.top = `${exY - 2}px`;
            }

            spawn(exX, exY);
        }

        function spawn(x, y) {
            const p = document.createElement('div');
            p.className = 'particle';
            const colors = ['#ff4d00', '#ff8800', '#ffcc00', '#ffffff'];
            const color = isHovering ? (Math.random() > 0.8 ? '#fff' : '#00f2ff') : colors[Math.floor(Math.random()*colors.length)];
            
            Object.assign(p.style, {
                left: `${x}px`, top: `${y}px`, width: '5px', height: '5px',
                backgroundColor: color, boxShadow: `0 0 8px ${color}`
            });
            document.body.appendChild(p);

            const r = (angle + 90) * (Math.PI / 180);
            const v = isHovering ? 60 : 35;
            const dx = Math.cos(r) * v + (Math.random()-0.5)*20;
            const dy = Math.sin(r) * v + (Math.random()-0.5)*20;

            const anim = p.animate([
                { transform: 'translate(0,0)', opacity: 1 },
                { transform: `translate(${dx}px, ${dy}px)`, opacity: 0 }
            ], { duration: isHovering ? 350 : 500 });
            anim.onfinish = () => p.remove();
        }

        function update() {
            rocketX += (mouseX - rocketX) * 0.12;
            rocketY += (mouseY - rocketY) * 0.12;

            let targetAngle = isHovering ? 0 : Math.atan2(mouseY - rocketY, mouseX - rocketX) * (180 / Math.PI) + 90;

            let diff = targetAngle - angle;
            while (diff < -180) diff += 360;
            while (diff > 180) diff -= 360;
            angle += diff * 0.15;

            rocket.style.transform = `translate3d(${rocketX - 16}px, ${rocketY - 16}px, 0) rotate(${angle}deg)`;
            requestAnimationFrame(update);
        }
        update();
    </script>
</body>
</html>